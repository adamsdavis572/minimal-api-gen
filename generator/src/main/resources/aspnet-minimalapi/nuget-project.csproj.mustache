<Project Sdk="Microsoft.NET.Sdk.Web">

    <!-- Basic Project Properties -->
    <PropertyGroup>
        <TargetFramework>net8.0</TargetFramework>
        <OutputType>Library</OutputType>
        <IsPackable>true</IsPackable>
        <ImplicitUsings>enable</ImplicitUsings>
        <Nullable>enable</Nullable>
        <LangVersion>latest</LangVersion>
        <EnableDefaultCompileItems>false</EnableDefaultCompileItems>
    </PropertyGroup>

    <!-- NuGet Package Metadata -->
    <PropertyGroup>
        <!-- Core identification -->
        <PackageId>{{packageName}}.Contracts</PackageId>
        <Version>{{packageVersion}}</Version>
        <Authors>Generated by OpenAPI Generator</Authors>
        <Company>Generated by OpenAPI Generator</Company>
        <Description>{{packageDescription}}</Description>
        
        <!-- Licensing -->
        <PackageLicenseExpression>{{packageLicenseExpression}}</PackageLicenseExpression>
        {{#packageRepositoryUrl}}
        
        <!-- Repository information -->
        <RepositoryUrl>{{packageRepositoryUrl}}</RepositoryUrl>
        <RepositoryType>git</RepositoryType>
        {{/packageRepositoryUrl}}
        {{#packageProjectUrl}}
        
        <!-- Project information -->
        <PackageProjectUrl>{{packageProjectUrl}}</PackageProjectUrl>
        {{/packageProjectUrl}}
        
        <!-- Discoverability -->
        <PackageTags>{{packageTags}}</PackageTags>
        
        <!-- Packaging behavior -->
        <GeneratePackageOnBuild>false</GeneratePackageOnBuild>
    </PropertyGroup>

    <!-- Framework Dependencies -->
    <ItemGroup>
        <!-- ASP.NET Core framework reference for RouteGroupBuilder and Minimal API types -->
        <FrameworkReference Include="Microsoft.AspNetCore.App" />
    </ItemGroup>

    <!-- Package Dependencies -->
    <ItemGroup>
        <!-- MediatR for Commands/Queries (REQUIRED) -->
        <PackageReference Include="MediatR" Version="12.2.0" />
        <PackageReference Include="MediatR.Contracts" Version="2.0.1" />
        
        <!-- ASP.NET Core extensions -->
        <PackageReference Include="Microsoft.AspNetCore.OpenApi" Version="8.0.0" />
        
        <!-- FluentValidation (CONDITIONAL on useValidators) -->{{#useValidators}}
        <PackageReference Include="FluentValidation" Version="11.9.0" />
        <PackageReference Include="FluentValidation.DependencyInjectionExtensions" Version="11.9.0" />{{/useValidators}}
    </ItemGroup>

    <!-- Generated Source Files (Unified References) -->
    <ItemGroup>
        <!-- Commands from Contract/ directory (MediatR request definitions) -->
        <Compile Include="..\..\Contract\Commands\*.cs" Link="Commands\%(Filename)%(Extension)" />
        
        <!-- Queries from Contract/ directory (MediatR request definitions) -->
        <Compile Include="..\..\Contract\Queries\*.cs" Link="Queries\%(Filename)%(Extension)" />
        
        <!-- DTOs from Contract/ directory (request/response DTOs with enum types) -->
        <Compile Include="..\..\Contract\DTOs\*.cs" Link="DTOs\%(Filename)%(Extension)" />
        
        <!-- Endpoints from Contract/ directory (Minimal API endpoint definitions) -->
        <Compile Include="..\..\Contract\Endpoints\*.cs" Link="Endpoints\%(Filename)%(Extension)" />
        
        <!-- Converters from Contract/ directory (JSON serialization for DTO enums) -->
        <Compile Include="..\..\Contract\Converters\*.cs" Link="Converters\%(Filename)%(Extension)" />
        
        <!-- Validators from Contract/ directory (FluentValidation validators) -->{{#useValidators}}
        <Compile Include="..\..\Contract\Validators\*.cs" Link="Validators\%(Filename)%(Extension)" />{{/useValidators}}
    </ItemGroup>
    
    <!-- NOTE: Models and Handlers are generated as templates in src/{{packageName}}/ -->
    <!-- They are NOT included in the Contracts NuGet package -->

    <!-- Extension Methods (Local to project) -->
    <ItemGroup>
        <Compile Include="Extensions\EndpointExtensions.cs" />{{#useValidators}}
        <Compile Include="Extensions\ValidatorExtensions.cs" />{{/useValidators}}
    </ItemGroup>

</Project>
